{
  "parameters": {
    "path": {
      "attr": "url"
    },
    "user_parameters": {
      "url": {
        "function": "concat",
        "args": [
          "https://www.gasnet.cz/data/online_toky/vcpnet/",
          {
            "function": "string_to_date",
            "args": [
              "today",
              "%Y%m%d"
            ]
          },
          ".csv"
        ]
      }
    },
    "file_name": "gasnet_vcpnet.csv",
    "debug": true
  },
  "processors": {
    "before": [],
    "after": [
      {
        "definition": {
          "component": "keboola.processor-move-files"
        },
        "parameters": {
          "direction": "tables",
          "addCsvSuffix": true,
          "folder": "gasnet_vc"
        }
      },
      {
        "definition": {
          "component": "keboola.processor-iconv"
        },
        "parameters": {
          "source_encoding": "WINDOWS-1250"
        }
      },
      {
        "definition": {
          "component": "keboola.processor-skip-lines"
        },
        "parameters": {
          "lines": 1,
          "direction_from": "top"
        }
      },
      {
        "definition": {
          "component": "keboola.processor-create-manifest"
        },
        "parameters": {
          "delimiter": ";",
          "enclosure": "\"",
          "incremental": true,
          "primary_key": [
            "Datum",
            "ID"
          ],
          "columns": [
            "Datum",
            "ID",
            "Hodnota",
            "Nazev"
          ]
        }
      }
    ]
  }
}
